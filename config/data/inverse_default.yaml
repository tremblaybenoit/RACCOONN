defaults:
  - variables/inverse_input@stage.train.vars
  - variables/inverse_input@stage.valid.vars
  - variables/inverse_input@stage.test.vars
  - variables/inverse_input@stage.predict.vars
  - variables/inverse_target@stage.train.vars
  - variables/inverse_target@stage.valid.vars
  - variables/inverse_target@stage.test.vars

# Configuration to download the training and testing data
download:
  dir: ${paths.data_dir}
  url: "https://zenodo.org/record/1482223/files/GOES-16_ML_Training_Testing_Data.zip?download=1"

# dtype
dtype: 'float32'

# Pressure filter
pressure_filter:
  load:
    _target_: inverse.data.filters.pressure_filter
    prof:
      _target_: utilities.io.load_stack_and_normalize
      _recursive_: false
      stack:
        - load: ${data.stage.train.vars.prof.load}
          normalization:
            _target_: inverse.data.transformations.min_max
            _partial_: true
            stats:
              _target_: inverse.data.statistics.read_statistics_var
              path: ${preparation.statistics.data.output.path}
              var: 'prof'
              dtype: ${data.dtype}
            axis: null
        - load: ${data.stage.valid.vars.prof.load}
          normalization:
            _target_: inverse.data.transformations.min_max
            _partial_: true
            stats:
              _target_: inverse.data.statistics.read_statistics_var
              path: ${preparation.statistics.data.output.path}
              var: 'prof'
              dtype: ${data.dtype}
            axis: null
        - load: ${data.stage.test.vars.prof.load}
          normalization:
            _target_: inverse.data.transformations.min_max
            _partial_: true
            stats:
              _target_: inverse.data.statistics.read_statistics_var
              path: ${preparation.statistics.data.output.path}
              var: 'prof'
              dtype: ${data.dtype}
            axis: null

# Split the data into training, validation, and test sets
stage:
  # Training set
  train:
    # Path to training data
    dir: ${paths.data_dir}/Train2
    # Split
    split:
      _target_: ${data.stage.train.vars.cloud_filter.load._target_}
      _args_:
        - _target_: ${data.stage.train.vars.prof.load._target_}
          path: ${data.stage.train.vars.prof.load.path}


  # Validation set
  valid:
    # Path to validation data
    dir: ${paths.data_dir}/Val2
    # Split
    split:
      _target_: ${data.stage.valid.vars.cloud_filter.load._target_}
      _args_:
        - _target_: ${data.stage.valid.vars.prof.load._target_}
          path: ${data.stage.valid.vars.prof.load.path}

  # Test set
  test:
    # Path to test data
    dir: ${paths.data_dir}/Test2
    # Split
    split:
      _target_: ${data.stage.test.vars.cloud_filter.load._target_}
      _args_:
        - _target_: ${data.stage.test.vars.prof.load._target_}
          path: ${data.stage.test.vars.prof.load.path}

  # Prediction set (NOTE: By default, we use the test set as the prediction set for demonstration purposes)
  predict:
    # Path to prediction data
    dir: ${paths.data_dir}/Test2
    # Split
    split: ${data.stage.test.split}