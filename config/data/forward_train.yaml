# Configuration for the variables used in the dataset, as a function of the stage

# Training set
train:
  # Atmospheric profiles
  prof:
    # Profile types
    type: ['Air temperature', 'Water vapor mixing ratio', 'Cloud ice mass', 'Cloud water mass', 'Snow mass',
           'Ice particle effective radius', 'Water particle effective radius',
           'Snow particle effective radius', 'Ozone mixing ratio']
    # Path to the training profiles
    path: ${paths.data_dir}/Train2/prof.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.vars.prof.path}
    # Normalization function and parameters
    normalization:
      _target_: forward.data.transformations.NormalizeProfiles
      _partial_: false
      profmax:
        _target_: numpy.loadtxt
        _args_:
          - forward/data/normalization/prof_div.txt
      profmin:
        _target_: numpy.loadtxt
        _args_:
          - forward/data/normalization/prof_m.txt
  # Surface observations
  surf:
    # Surface variable types
    type: ['Ice area fraction', 'Land area fraction', 'Land type', 'Leaf area index', 'Soil temperature',
           'Snow area fraction', 'Snow thickness', 'Soil temperature',
           'Surface temperature (ice, land, sea, snow)', 'Wind direction', 'Wind speed',
           'Vegetation area fraction', 'Water area fraction', 'Volumetric water ratio (soil)']
    # Path to the training surface data
    path: ${paths.data_dir}/Train2/surf.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.vars.surf.path}
    # Normalization function and parameters
    normalization:
      _target_: forward.data.transformations.NormalizeSurface
      _partial_: false
      surfmax:
        _target_: numpy.loadtxt
        _args_:
          - forward/data/normalization/surfmax.txt
      surfmin:
        _target_: numpy.loadtxt
        _args_:
          - forward/data/normalization/surfmin.txt
  # Metadata
  meta:
    # Metadata variable types
    type: ['Sensor scan angle', 'Sensor zenith angle', 'Sensor view angle', 'Sensor azimuth angle',
            'Sensor elevation angle', 'Solar azimuth angle', 'Solar zenith angle']
    # Path to the training metadata
    path: ${paths.data_dir}/Train2/meta.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.vars.meta.path}
    # Normalization function and parameters
    normalization:
      _target_: forward.data.transformations.NormalizeMeta
      _partial_: false
      settings:
        meta_cos_vars: [ 6 ]
        meta_scale_factor: 180
        meta_scale_offset: -180
        meta_scale_vars: [ ]
        meta_sin_vars: [ 0, 1, 2, 3, 4, 5 ]
  # Brightness temperatures (observed)
  hofx:
    # Path to the training brightness temperatures
    path: ${paths.data_dir}/Train2/hofx.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.vars.hofx.path}
  # Latitude
  lat:
    # Path to the training latitudes
    path: ${paths.data_dir}/Train2/lat.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.vars.lat.path}
  # Longitude
  lon:
    # Path to the training longitudes
    path: ${paths.data_dir}/Train2/lon.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.vars.lon.path}
  # Scans
  scans:
    # Path to the training scans
    path: ${paths.data_dir}/Train2/scans.txt
    # Loading function
    load:
      _target_: numpy.loadtxt
      _args_:
        - ${data.vars.scans.path}
  # Pressure levels
  pressure:
    # Path to the training pressure levels
    path: ${paths.data_dir}/Train2/pressure.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.vars.pressure.path}

# Validation set
valid:
  # Atmospheric profiles
  prof:
    # Use same types as training
    type: ${stage.train.prof.type}
    # Path to the validation profiles
    path: ${paths.data_dir}/Valid2/prof.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.valid.prof.path}
    # Use same normalization as training
    normalization: ${data.stage.train.prof.normalization}
  # Surface observations
  surf:
    type: ${stage.train.surf.type}
    path: ${paths.data_dir}/Valid2/surf.npy
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.valid.surf.path}
    normalization: ${data.stage.train.surf.normalization}
  # Metadata
  meta:
    # Use same types as training
    type: ${stage.train.meta.type}
    # Path to the validation metadata
    path: ${paths.data_dir}/Valid2/meta.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.valid.meta.path}
    # Use same normalization as training
    normalization: ${data.stage.train.meta.normalization}
  # Brightness temperatures (observed)
  hofx:
    # Path to the validation brightness temperatures
    path: ${paths.data_dir}/Valid2/hofx.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.valid.hofx.path}
  # Latitude
  lat:
    # Path to the validation latitudes
    path: ${paths.data_dir}/Valid2/lat.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.valid.lat.path}
  # Longitude
  lon:
    # Path to the validation longitudes
    path: ${paths.data_dir}/Valid2/lon.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.valid.lon.path}
  # Scans
  scans:
    # Path to the validation scans
    path: ${paths.data_dir}/Valid2/scans.txt
    # Loading function
    load:
      _target_: numpy.loadtxt
      _args_:
        - ${data.stage.valid.scans.path}
  # Pressure levels
  pressure:
    # Path to the validation pressure levels
    path: ${paths.data_dir}/Valid2/pressure.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.valid.pressure.path}

# Test set
test:
  # Atmospheric profiles
  prof:
    # Use same types as training
    type: ${stage.train.prof.type}
    # Path to the test profiles
    path: ${paths.data_dir}/Test2/prof.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.test.prof.path}
    # Use same normalization as training
    normalization: ${data.stage.train.prof.normalization}
  # Surface observations
  surf:
    # Use same types as training
    type: ${stage.train.surf.type}
    # Path to the test surface data
    path: ${paths.data_dir}/Test2/surf.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.test.surf.path}
    # Use same normalization as training
    normalization: ${data.stage.train.surf.normalization}
  # Metadata
  meta:
    # Use same types as training
    type: ${stage.train.meta.type}
    # Path to the test metadata
    path: ${paths.data_dir}/Test2/meta.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.test.meta.path}
    # Use same normalization as training
    normalization: ${data.stage.train.meta.normalization}
  # Brightness temperatures (observed)
  hofx:
    # Path to the test brightness temperatures
    path: ${paths.data_dir}/Test2/hofx.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.test.hofx.path}
  # Latitude
  lat:
    # Path to the test latitudes
    path: ${paths.data_dir}/Test2/lat.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.test.lat.path}
  # Longitude
  lon:
    # Path to the test longitudes
    path: ${paths.data_dir}/Test2/lon.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.test.lon.path}
  # Scans
  scans:
    # Path to the test scans
    path: ${paths.data_dir}/Test2/scans.txt
    # Loading function
    load:
      _target_: numpy.loadtxt
      _args_:
        - ${data.stage.test.scans.path}
  # Pressure levels
  pressure:
    # Path to the test pressure levels
    path: ${paths.data_dir}/Test2/pressure.npy
    # Loading function
    load:
      _target_: numpy.load
      _args_:
        - ${data.stage.test.pressure.path}